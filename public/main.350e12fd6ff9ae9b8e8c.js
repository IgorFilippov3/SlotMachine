!function(e){function t(t){for(var r,o,l=t[0],u=t[1],s=t[2],d=0,f=[];d<l.length;d++)o=l[d],a[o]&&f.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t);f.length;)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,l=1;l<n.length;l++){var u=n[l];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var l=window.webpackJsonp=window.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var c=u;i.push([91,1]),n()}({16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38)),a=n(195);function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=r.loader.resources,l=r.loader,u=r.Sprite,s=r.Container,c=r.Graphics,d=r.filters.BlurFilter,f=r.Text,h={atlas:"",atlasRefs:[],tweening:[],reels:[],loadAssets:function(e,t,n){this.atlas=e,this.atlasRefs=t,l.add(this.atlas).load(n)},createElement:function(e,t,n){if(!this.atlas)throw"Atlas schema must be insterted before creating elements.";var r=o["atlas/slot-machine-atlas.json"].textures;switch(e){case"Background":return this.createBackground(r,t,n);case"Button":return this.createButton(r,t,n);case"Reels":return this.createReels(r,n);case"Container":return this.createContainer(n);case"Text":return this.createText(n);default:throw"Element type must be specified."}},createText:function(e){var t=e.name,n=e.style,r=e.x,a=e.y,i=e.anchor,o=new f(t,n);return o.x=r,o.y=a,i&&(o.anchor.x=i.x,o.anchor.y=i.y),o},createContainer:function(e){var t=new s,n=e.x,r=e.y,a=e.width,i=e.height;return t.x=n,t.y=r,t.width=a,t.height=i,t},createBackground:function(e,t,n){if(t)return new u(e[t]);var r=n.color,a=n.alpha,i=n.x,o=n.y,l=n.width,s=n.height,d=new c;return d.beginFill(r,a),d.drawRect(i,o,l,s),d.endFill(),d},createButton:function(e,t,n){var r=n.position,a=n.anchor,i=n.interactive,o=n.buttonMode,l=n.callback,s=new u(e[t]);return r&&s.position.set(r.x,r.y),a&&s.anchor.set(a),i&&(s.interactive=i),o&&(s.buttonMode=o),l&&s.on("pointerdown",l),s},createReels:function(e,t){var n=t.LEFT_PADDING,r=t.TOP_PADDING,a=t.REEL_WIDTH,i=t.SYMBOL_SIZE,o=new s;o.x=n,o.y=r;for(var l=0;l<3;l++){var u=new s;switch(u.x=l*a,l){case 0:u.x=l*a;break;case 1:u.x=l*a+5;break;case 2:u.x=l*a+14;break;default:throw"Behavior is specified only for 3 reels, by default"}o.addChild(u);var c={container:u,symbols:[],position:0,previousPosition:0,blur:new d};c.blur.blurX=0,c.blur.blurY=0,u.filters=[c.blur];for(var f=0;f<5;f++){var h=this.createSymbol(f,i,e);c.symbols.push(h),u.addChild(h)}this.reels.push(c)}return o},createSymbol:function(e,t,n){var r=Math.floor(Math.random()*this.atlasRefs.length),a=new u(n[this.atlasRefs[r]]);return"SYM0.png"===a._texture.textureCacheIds[0]&&(a.scale.x=.8,a.scale.y=.8,a.y=0),a.y=e*t,a.x=Math.round((t-a.width)/2),a},reel:function(e,t){for(var n=0;n<this.reels.length;n++){var r=this.reels[n],i=null;n===this.reels.length-1&&(i=t),h.tweenTo(r,"position",r.position+10+3*n+e,1500+600*n+600*e,(0,a.backout)(.6),null,i)}},animateReel:function(e,t){var n=this;e.ticker.add(function(){for(var e=0;e<n.reels.length;e++){var r=n.reels[e];r.blur.blurY=8*(r.position-r.previousPosition),r.previousPosition=r.position;for(var i=0;i<r.symbols.length;i++){var o=r.symbols[i],l=o.y;o.y=(r.position+i)%r.symbols.length*t-t,"SYM0.png"===o._texture.textureCacheIds[0]&&(o.y+=18),o.y<0&&l>t&&(o.x=Math.round((t-o.width)/2))}}for(var u=Date.now(),s=[],c=0;c<n.tweening.length;c++){var d=n.tweening[c],f=Math.min(1,(u-d.start)/d.time);d.object[d.property]=(0,a.lerp)(d.propertyBeginValue,d.target,d.easing(f)),d.change&&d.change(d),1==f&&(d.object[d.property]=d.target,d.complete&&d.complete(d),s.push(d))}for(var h=0;h<s.length;h++)n.tweening.splice(n.tweening.indexOf(s[h]),1)})},tweenTo:function(e,t,n,r,a,i,o){var l={object:e,property:t,propertyBeginValue:e[t],target:n,easing:a,time:r,change:i,complete:o,start:Date.now()};this.tweening.push(l)},checkReelResult:function(){var e=this.reels.reduce(function(e,t){var n=t.container.children.find(function(e){return Math.floor(e.y)>120&&Math.floor(e.y)<200});return[].concat(i(e),n?[n._texture.textureCacheIds[0]]:[null])},[]);return(0,a.isAllElementsEqual)(e)}};t.default=h},195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.backout=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},t.lerp=function(e,t,n){return e*(1-n)+t*n},t.isAllElementsEqual=function(e){return 1===new Set(e).size}},196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateScoreContainer=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(16));t.generateScoreContainer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=r.default.createElement("Container",null,{x:798,y:350,width:150,height:70}),n=r.default.createElement("Background",null,{color:0,alpha:.5,x:0,y:0,width:t._width,height:t._height}),a=r.default.createElement("Container",null,{x:4,y:4,width:0,height:0}),i={fill:"#ebef09",fontFamily:"Arial",fontSize:14,fontWeight:"normal"},o=r.default.createElement("Text",null,{name:"MONEY :",style:i,x:0,y:0}),l=r.default.createElement("Text",null,{name:"$"+e,style:i,x:o.width+4,y:0});a.addChild(o),a.addChild(l);var u=r.default.createElement("Container",null,{x:4,y:24,width:0,height:0}),s=r.default.createElement("Text",null,{name:"WIN :",style:i,x:0,y:0}),c=r.default.createElement("Text",null,{name:0,style:i,x:s.width+4,y:0});return u.addChild(s),u.addChild(c),t.addChild(n),t.addChild(a),t.addChild(u),{container:t,moneyTextCount:l,winTextCount:c}}},197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateDisableButton=t.generateButton=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(16));t.generateButton=function(e){return r.default.createElement("Button","BTN_Spin.png",{position:{x:873,y:267},anchor:.5,interactive:!0,buttonMode:!0,callback:e})},t.generateDisableButton=function(){return r.default.createElement("Button","BTN_Spin_d.png",{position:{x:873,y:267},anchor:.5})}},198:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateMessageContainer=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(16));t.generateMessageContainer=function(e,t,n,a){var i=r.default.createElement("Container",null,{x:70,y:t,width:3*(n+4),height:2.5*a});i.visible=!1;var o=r.default.createElement("Background",null,{color:0,alpha:.5,x:0,y:0,width:i._width,height:i._height});i.addChild(o);var l=r.default.createElement("Text",null,{name:e,style:{fill:"#ebef09",fontFamily:"Arial",fontSize:124,fontWeight:"normal"},x:o.width/2,y:o.height/2,anchor:{x:.5,y:.5}});return i.addChild(l),i}},91:function(e,t,n){"use strict";var r=u(n(92)),a=u(n(16)),i=n(196),o=n(197),l=n(198);function u(e){return e&&e.__esModule?e:{default:e}}var s=new r.default({width:960,height:536,antialias:!0,transparent:!1,resolution:1,atlas:"atlas/slot-machine-atlas.json",atlasRefs:["SYM0.png","SYM1.png","SYM2.png","SYM3.png","SYM4.png","SYM5.png"],root:document.getElementById("root"),setup:function(){var e=a.default.createElement("Background","BG.png");s.renderElement(e);var t=a.default.createElement("Reels",null,{LEFT_PADDING:110,TOP_PADDING:30,REEL_WIDTH:235,SYMBOL_SIZE:150});s.renderElement(t);var n=(0,i.generateScoreContainer)(f),r=n.container,u=n.moneyTextCount,p=n.winTextCount;s.renderElement(r);var v=(0,l.generateMessageContainer)("You won!",30,235,150);s.renderElement(v);var g=(0,l.generateMessageContainer)("You lose :(",30,235,150);s.renderElement(g);var y=(0,o.generateDisableButton)();s.renderElement(y);var b=(0,o.generateButton)(function(){!function(e,t,n,r,i){fetch("/reel-spin").then(function(e){return e.json()}).then(function(o){e.visible=!1,t.visible&&(t.visible=!1),a.default.reel(o.extra,function(){!function(e,t,n,r,i){if(e.visible=!0,a.default.checkReelResult())r.text="$"+h(c,r.text),i.text=h(1,i.text),t.visible=!0;else{var o=h(-d,r.text);r.text="$"+o,o<=0&&(n.visible=!0,e.visible=!1)}}(e,t,n,r,i)})})}(b,v,g,u,p)});s.renderElement(b),a.default.animateReel(s.app,150)}}),c=100,d=10,f=100;function h(e,t){return t.includes("$")&&(t=t.replace("$","")),parseInt(t)+e}},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38)),i=function(e){return e&&e.__esModule?e:{default:e}}(n(16));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=this.createApp(t),this.loadAssets(t)}return r(e,[{key:"createApp",value:function(e){var t=e.width,n=e.height,r=e.antialias,i=e.transparent,o=e.resolution,l=e.root,u=new a.Application({width:t,height:n,antialias:r,transparent:i,resolution:o});return l.appendChild(u.view),u}},{key:"loadAssets",value:function(e){var t=e.atlas,n=e.atlasRefs,r=e.setup;i.default.loadAssets(t,n,r)}},{key:"renderElement",value:function(e){this.app.stage.addChild(e)}}]),e}();t.default=o}});